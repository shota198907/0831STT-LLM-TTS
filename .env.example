############################
# Gateway runtime variables #
############################

# GCPプロジェクトID（認可ヘッダ x-goog-user-project に使用）
GOOGLE_CLOUD_PROJECT=
# リージョン（参考）：Live接続URLに含まれる場合はそちらを優先
GOOGLE_CLOUD_LOCATION=asia-northeast1
# 使用モデル名（参考）：上流ハンドシェイク時に利用する場合があります
LIVE_MODEL=gemini-live-2.5-flash-preview-native-audio

# Vertex AI Live API の WS エンドポイント
# 未設定（空）の場合は Gateway は echo モードで動作します
LIVE_API_WS_URL=

# 認証
# - APIキーで接続する場合は GOOGLE_API_KEY を設定（推奨: 開発/検証）
# - サービスアカウント/OAuth の場合は ADC（Application Default Credentials）を利用
#   例: GOOGLE_APPLICATION_CREDENTIALS=/path/to/sa.json
GOOGLE_API_KEY=

# Live接続のready待ちタイムアウト（ms）。未到達時はechoにフォールバック
LIVE_READY_TIMEOUT_MS=8000

# WSトークンゲート（本番導入時に有効化）
# 認証（サブプロトコル: token=opaque / bearer:opaque 優先。サーバ間は X-WS-Token も許可）
REQUIRE_WS_TOKEN=false
WS_TOKEN=
# ローカルUI用: Next等(3000) とゲートウェイ直配信(8080)の双方を許可
WS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080
# テストページ(/test)の提供を有効化（デフォルト: 無効）
# 本番では必ず無効にしてください
ENABLE_TEST_CLIENT=false
PORT=8080

# Live API セットアップ指定
# - TEXT: テキスト応答（安定） / AUDIO: 音声応答
#   複数可: 例) TEXT,AUDIO
LIVE_RESPONSE_MODALITIES=TEXT
# 入力音声の文字起こしを有効化（falseで無効）
LIVE_ENABLE_INPUT_TRANSCRIPTION=true

# HTTP サーバのアクセスログ（必要時のみ有効）
HTTP_LOG=false

# PR#1: Hardened runtime controls
# Originなしのクライアントを許可するか（非ブラウザ用途）。本番では false 推奨
ALLOW_NO_ORIGIN=false
# クエリ ?token= を許可するか（デバッグ用）。本番では false 固定を推奨
ALLOW_QUERY_TOKEN=false
# アイドル切断（秒）。0以下で無効
WS_IDLE_TIMEOUT_SEC=120
# 最大ペイロード（バイト）
WS_MAX_PAYLOAD=1048576
# permessage-deflate 圧縮を有効化
WS_ENABLE_DEFLATE=true
